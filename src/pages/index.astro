---
import PublicLayout from "../layouts/PublicLayout.astro";
import Hero from "../components/home/Hero.astro";
import ContactSection from "../components/home/ContactSection.astro";
import FeaturedProjects from "../components/home/FeaturedProjects.astro";
import { getProjects } from "../lib/projects";
import type { Project } from "../types/project";

let allProjects: Project[] = [];
try {
	allProjects = await getProjects();
} catch (error) {
	console.error("Failed to fetch projects:", error);
}

const skills = [
	{
		category: "Backend & Architecture",
		items: [
			"Bun",
			"Hono",
			"PostgreSQL",
			"Java Spring Boot",
			"MongoDB",
			"Node.js",
		],
	},
	{
		category: "Mobile Engineering",
		items: ["Flutter", "React Native", "Kotlin", "Dart", "Swift"],
	},
	{
		category: "Frontend Ecosystem",
		items: ["React", "Astro", "TypeScript", "Tailwind CSS", "Next.js"],
	},
	{
		category: "DevOps & Tools",
		items: ["Docker", "Git", "CI/CD", "Linux", "Figma"],
	},
];
---

<PublicLayout>
	<Hero />

	<div class="container-main space-y-16 md:space-y-24 pb-16 md:pb-24">
		<!-- About Section -->
		<section id="about" class="scroll-offset relative py-12 md:py-20">
			<!-- Background Gradients -->
			<div
				class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none"
			>
				<div
					class="absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-cyan-500/5 rounded-full blur-[100px]"
				>
				</div>
				<div
					class="absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-purple-500/5 rounded-full blur-[100px]"
				>
				</div>
			</div>

			<div
				class="relative z-10 grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-16 items-center"
			>
				<!-- Profile Column (Left - 5 cols) -->
				<div class="lg:col-span-5 flex flex-col gap-6">
					<!-- Terminal Profile Card -->
					<div
						class="group relative rounded-2xl overflow-hidden border border-gray-800 bg-gray-900/80 backdrop-blur-xl shadow-2xl transition-transform duration-500 hover:scale-[1.02]"
					>
						<!-- Terminal Header -->
						<div
							class="flex items-center justify-between px-4 py-3 bg-gray-800/50 border-b border-gray-800"
						>
							<div class="flex gap-2">
								<div class="w-3 h-3 rounded-full bg-red-500/80">
								</div>
								<div
									class="w-3 h-3 rounded-full bg-yellow-500/80"
								>
								</div>
								<div
									class="w-3 h-3 rounded-full bg-green-500/80"
								>
								</div>
							</div>
							<div class="text-xs font-mono text-gray-500">
								profile.json
							</div>
						</div>

						<!-- Profile Content -->
						<div class="p-8 relative">
							<!-- Tech Rings Background -->
							<div
								class="absolute inset-0 flex items-center justify-center opacity-20 pointer-events-none"
							>
								<div
									class="w-64 h-64 border border-cyan-500/30 rounded-full animate-[spin_10s_linear_infinite]"
								>
								</div>
								<div
									class="absolute w-48 h-48 border border-purple-500/30 rounded-full animate-[spin_15s_linear_infinite_reverse]"
								>
								</div>
							</div>

							<div
								class="relative z-10 flex flex-col items-center text-center"
							>
								<div
									class="w-32 h-32 mb-6 rounded-full p-1 bg-gradient-to-br from-cyan-500 to-purple-600"
								>
									<div
										class="w-full h-full rounded-full bg-gray-900 flex items-center justify-center overflow-hidden"
									>
										<!-- Avatar Placeholder -->
										<svg
											class="w-16 h-16 text-gray-400"
											fill="none"
											stroke="currentColor"
											viewBox="0 0 24 24"
										>
											<path
												stroke-linecap="round"
												stroke-linejoin="round"
												stroke-width="1.5"
												d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
											></path>
										</svg>
									</div>
								</div>

								<h3 class="text-2xl font-bold text-white mb-2">
									Hafiz Bahtiar
								</h3>
								<div
									class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gray-800/50 border border-gray-700"
								>
									<span
										class="w-2 h-2 rounded-full bg-green-500 animate-pulse"
									></span>
									<span
										class="text-xs font-mono text-gray-300"
										>Available for hire</span
									>
								</div>
							</div>
						</div>

						<!-- Code Snippet -->
						<div
							class="bg-gray-950 p-6 border-t border-gray-800 font-mono text-xs overflow-x-auto"
						>
							<div class="flex gap-4 text-gray-500 mb-2">
								<span>1</span>
								<span class="text-purple-400">const</span>
								<span class="text-blue-400">developer</span> = {
									"{"
								}
							</div>
							<div class="flex gap-4 text-gray-500 mb-1">
								<span>2</span>
								<span class="pl-4 text-gray-300">role:</span>
								<span class="text-green-400"
									>'Full Stack Engineer'</span
								>,
							</div>
							<div class="flex gap-4 text-gray-500 mb-1">
								<span>3</span>
								<span class="pl-4 text-gray-300">level:</span>
								<span class="text-orange-400">'Mid-Senior'</span
								>,
							</div>
							<div class="flex gap-4 text-gray-500 mb-1">
								<span>4</span>
								<span class="pl-4 text-gray-300">coffee:</span>
								<span class="text-blue-400">true</span>
							</div>
							<div class="flex gap-4 text-gray-500">
								<span>5</span>
								{"}"};
							</div>
						</div>
					</div>
				</div>

				<!-- Content Column (Right - 7 cols) -->
				<div class="lg:col-span-7 flex flex-col justify-center gap-8">
					<div class="space-y-6">
						<div class="flex items-center gap-3">
							<span class="text-cyan-400 font-mono text-sm"
								>~/about-me</span
							>
							<div
								class="h-px flex-1 bg-gradient-to-r from-cyan-500/20 to-transparent"
							>
							</div>
						</div>

						<h2
							class="text-3xl md:text-5xl font-bold leading-tight text-white"
						>
							<span
								class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500"
								>Architecting</span
							> the future of digital experiences.
						</h2>

						<p class="text-gray-400 text-lg leading-relaxed">
							I'm a software engineer focused on <span
								class="text-cyan-400 font-mono"
								>backend first</span
							> and
							<span class="text-purple-400 font-mono"
								>mobile second</span
							>. I build reliable services and practical mobile
							experiences that ship fast and stay maintainable.
						</p>

						<p class="text-gray-400 text-lg leading-relaxed">
							Main stack: <span
								class="text-cyan-400 font-mono text-sm bg-cyan-400/10 px-1 rounded"
								>Bun</span
							> + <span
								class="text-cyan-400 font-mono text-sm bg-cyan-400/10 px-1 rounded"
								>Hono</span
							> + <span
								class="text-cyan-400 font-mono text-sm bg-cyan-400/10 px-1 rounded"
								>PostgreSQL</span
							>, <span
								class="text-purple-400 font-mono text-sm bg-purple-400/10 px-1 rounded"
								>Spring Boot</span
							> + <span
								class="text-purple-400 font-mono text-sm bg-purple-400/10 px-1 rounded"
								>PostgreSQL</span
							> + <span
								class="text-purple-400 font-mono text-sm bg-purple-400/10 px-1 rounded"
								>MongoDB</span
							>, plus <span
								class="text-cyan-400 font-mono text-sm bg-cyan-400/10 px-1 rounded"
								>Flutter</span
							>, <span
								class="text-cyan-400 font-mono text-sm bg-cyan-400/10 px-1 rounded"
								>React Native</span
							>, and <span
								class="text-cyan-400 font-mono text-sm bg-cyan-400/10 px-1 rounded"
								>Kotlin</span
							>.
						</p>
					</div>

					<!-- Stats Grid -->
					<div class="grid grid-cols-2 md:grid-cols-3 gap-4">
						<!-- Stat 1 -->
						<div
							class="p-4 rounded-xl bg-gray-800/30 border border-gray-800 hover:border-cyan-500/50 transition-all hover:bg-gray-800/50 group"
						>
							<div
								class="text-3xl font-bold text-white mb-1 group-hover:text-cyan-400 transition-colors"
							>
								5+
							</div>
							<div class="text-sm text-gray-500 font-mono">
								Years Exp
							</div>
						</div>
						<!-- Stat 2 -->
						<div
							class="p-4 rounded-xl bg-gray-800/30 border border-gray-800 hover:border-purple-500/50 transition-all hover:bg-gray-800/50 group"
						>
							<div
								class="text-3xl font-bold text-white mb-1 group-hover:text-purple-400 transition-colors"
							>
								{allProjects.length}+
							</div>
							<div class="text-sm text-gray-500 font-mono">
								Projects
							</div>
						</div>
						<!-- Stat 3 -->
					</div>

					<div class="pt-4">
						<a
							href="#contact"
							class="group inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-cyan-600 to-blue-600 text-white font-semibold rounded-lg hover:shadow-[0_0_20px_rgba(6,182,212,0.4)] transition-all"
						>
							<span>Initialize_Collab()</span>
							<svg
								class="w-4 h-4 group-hover:translate-x-1 transition-transform"
								fill="none"
								stroke="currentColor"
								viewBox="0 0 24 24"
								><path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg
							>
						</a>
					</div>
				</div>
			</div>
		</section>

		<!-- Skills Section -->
		<section id="skills" class="scroll-offset">
			<div class="text-center mb-16">
				<div
					class="inline-flex items-center gap-2 px-3 py-1 mb-6 text-sm font-mono text-cyan-400 bg-cyan-950/30 border border-cyan-500/30 rounded-full"
				>
					<span class="w-2 h-2 rounded-full bg-cyan-500 animate-pulse"
					></span>
					<span>TECH ARSENAL</span>
				</div>
				<h2
					class="text-3xl md:text-5xl font-bold mb-6 text-white tracking-tight"
				>
					Engineering <span
						class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500"
						>Stack</span
					>
				</h2>
				<p
					class="text-gray-400 text-lg max-w-2xl mx-auto leading-relaxed"
				>
					Tooling I use to ship <span class="text-cyan-400 font-mono"
						>clean, scalable</span
					>, and
					<span class="text-purple-400 font-mono"
						>performance-focused</span
					> experiences.
				</p>
			</div>

			<div class="grid grid-cols-1 gap-4">
				{
					skills.map((skillGroup, index) => (
						<div class="group relative overflow-hidden rounded-xl border border-gray-800 bg-gray-900/40 p-6 md:p-8 transition-all duration-300 hover:border-cyan-500/50 hover:bg-gray-900/80 hover:shadow-[0_0_20px_rgba(6,182,212,0.1)]">
							<div class="absolute -right-12 -top-12 h-32 w-32 rounded-full bg-cyan-500/5 blur-3xl transition-all duration-500 group-hover:bg-cyan-500/10" />

							<div class="flex flex-col md:flex-row md:items-center md:justify-between gap-6 relative z-10">
								<div class="md:w-1/3">
									<div class="flex items-center gap-3 mb-2">
										<span class="text-xs font-mono text-cyan-500/70">
											0{index + 1}
										</span>
										<div class="h-px w-8 bg-gray-800 group-hover:bg-cyan-500/50 transition-colors" />
									</div>
									<h3 class="text-xl font-bold text-white tracking-wide uppercase group-hover:text-cyan-400 transition-colors">
										{skillGroup.category}
									</h3>
								</div>

								<div class="md:w-2/3 flex flex-wrap gap-3">
									{skillGroup.items.map((item) => (
										<div class="relative overflow-hidden rounded-md border border-gray-700/50 bg-gray-800/50 px-3 py-1.5 text-sm font-medium text-gray-300 transition-colors hover:border-cyan-500/30 hover:text-white hover:bg-cyan-500/10">
											{item}
										</div>
									))}
								</div>
							</div>
						</div>
					))
				}
			</div>
		</section>

		<!-- Projects Section -->
		<section id="projects" class="scroll-offset relative">
			<div class="text-center mb-16">
				<div
					class="inline-flex items-center gap-2 px-3 py-1 mb-6 text-sm font-mono text-purple-400 bg-purple-950/30 border border-purple-500/30 rounded-full"
				>
					<span
						class="w-2 h-2 rounded-full bg-purple-500 animate-pulse"
					></span>
					<span>FEATURED WORK</span>
				</div>
				<h2
					class="text-3xl md:text-5xl font-bold mb-6 text-white tracking-tight"
				>
					Selected <span
						class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500"
						>Projects</span
					>
				</h2>
				<p
					class="text-gray-400 text-lg max-w-2xl mx-auto leading-relaxed"
				>
					A selection of my recent work demonstrating my expertise in
					<span class="text-cyan-400 font-mono">mobile</span> and <span
						class="text-purple-400 font-mono">web development</span
					>.
				</p>
			</div>

			<FeaturedProjects />

			<div class="text-center mt-12">
				<a
					href="/projects"
					class="group inline-flex items-center gap-2 px-6 py-3 bg-gray-900 border border-gray-700 hover:border-cyan-500/50 text-white font-medium rounded-lg transition-all hover:shadow-[0_0_20px_rgba(34,211,238,0.15)]"
				>
					<span>View All Projects</span>
					<svg
						class="w-4 h-4 group-hover:translate-x-1 transition-transform"
						fill="none"
						stroke="currentColor"
						viewBox="0 0 24 24"
						><path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg
					>
				</a>
			</div>
		</section>

		<!-- Contact Section -->
		<ContactSection />
	</div>
</PublicLayout>
