---
import TechDropdown from "../../ui/TechDropdown.astro";
import { TextEditor } from "../../ui/TextEditor";

type Props = {
  submitLabel: string;
  submitButtonId?: string;
  typeOptions: { value: string; label: string }[];
  statusOptions: { value: string; label: string }[];
  imageVariantOptions: { value: string; label: string }[];
  yearValue?: number;
  displayOrderValue?: number;
  imageVariantValue?: string;
  rolePlaceholder?: string;
};

const {
  submitLabel,
  submitButtonId = "submit-btn",
  typeOptions,
  statusOptions,
  imageVariantOptions,
  yearValue,
  displayOrderValue,
  imageVariantValue,
  rolePlaceholder = "e.g. Lead Developer",
} = Astro.props;

const cardClass =
  "bg-gray-800/50 backdrop-blur-xl border border-gray-700 rounded-xl p-6";
const titleClass =
  "text-lg font-bold text-white mb-6 border-b border-gray-700 pb-4";
const labelClass = "block text-sm font-medium text-gray-400";
const inputClass =
  "w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-cyan-500/50 focus:border-cyan-500 outline-none transition-all";
---

<div class="grid grid-cols-1 xl:grid-cols-[minmax(0,1fr)_360px] gap-8">
  <div class="space-y-8">
    <div class={cardClass}>
      <h3 class={titleClass}>Basic Information</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="space-y-2">
          <label class={labelClass}>Title</label>
          <input type="text" name="title" required class={inputClass} />
        </div>
        <div class="space-y-2">
          <label class={labelClass}>Slug</label>
          <input type="text" name="slug" required class={inputClass} />
        </div>
        <div class="space-y-2 md:col-span-2">
          <label class={labelClass}>Short Description</label>
          <textarea
            name="description"
            rows="2"
            required
            class={`${inputClass} resize-none`}></textarea>
        </div>
        <div class="space-y-2 md:col-span-2">
          <label class={labelClass}>Full Description (Markdown supported)</label
          >
          <TextEditor name="fullDescription" content="" client:load />
        </div>
      </div>
    </div>

    <div class={cardClass}>
      <h3 class={titleClass}>Links & Media</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="space-y-2">
          <label class={labelClass}>Image URL</label>
          <input type="text" name="imageUrl" class={inputClass} />
        </div>
        <div class="space-y-2">
          <TechDropdown
            label="Image Variant"
            name="imageVariant"
            options={imageVariantOptions}
            placeholder="Select Variant"
            value={imageVariantValue}
          />
        </div>
        <div class="space-y-2">
          <label class={labelClass}>Live URL</label>
          <input type="url" name="liveUrl" class={inputClass} />
        </div>
        <div class="space-y-2">
          <label class={labelClass}>GitHub URL</label>
          <input type="url" name="githubUrl" class={inputClass} />
        </div>
      </div>
    </div>
  </div>

  <div class="space-y-8">
    <div class={cardClass}>
      <h3 class={titleClass}>Project Details</h3>
      <div class="grid grid-cols-1 gap-6">
        <div class="space-y-2">
          <TechDropdown
            label="Type"
            name="projectType"
            options={typeOptions}
            placeholder="Select Type"
          />
        </div>
        <div class="space-y-2">
          <TechDropdown
            label="Status"
            name="status"
            options={statusOptions}
            placeholder="Select Status"
          />
        </div>
        <div class="space-y-2">
          <label class={labelClass}>Year</label>
          <input
            type="number"
            name="year"
            value={yearValue}
            class={inputClass}
          />
        </div>
        <div class="space-y-2">
          <label class={labelClass}>Role</label>
          <input
            type="text"
            name="role"
            placeholder={rolePlaceholder}
            class={inputClass}
          />
        </div>
        <div class="space-y-2">
          <label class={labelClass}>Display Order</label>
          <input
            type="number"
            name="displayOrder"
            value={displayOrderValue}
            class={inputClass}
          />
        </div>
        <div class="space-y-2 flex items-center pt-2">
          <label class="relative inline-flex items-center cursor-pointer">
            <input type="checkbox" name="featured" class="sr-only peer" />
            <div
              class="w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-cyan-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-cyan-600"
            >
            </div>
            <span class="ml-3 text-sm font-medium text-gray-400"
              >Featured Project</span
            >
          </label>
        </div>
      </div>
    </div>

    <div class={cardClass}>
      <h3 class={titleClass}>Taxonomy</h3>
      <div class="space-y-6">
        <div class="space-y-2">
          <label class={labelClass}>Technologies (comma separated)</label>
          <input type="text" name="technologies" class={inputClass} />
        </div>
        <div class="space-y-2">
          <label class={labelClass}>Tags (comma separated)</label>
          <input type="text" name="tags" class={inputClass} />
        </div>
      </div>
    </div>
  </div>
</div>

<div class="flex justify-end pt-4">
  <button
    type="submit"
    id={submitButtonId}
    class="bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-3 px-8 rounded-lg transition-colors shadow-[0_0_15px_rgba(6,182,212,0.4)] flex items-center gap-2"
  >
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
    </svg>
    {submitLabel}
  </button>
</div>
